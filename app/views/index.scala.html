@(q: Option[String], keys: Seq[(String, String)], projectDirs: Seq[String], repos: Seq[services.github.GithubService.Repo], debug: Boolean)(
    implicit request: Request[AnyContent], session: Session, flash: Flash
)@layout.simple(utils.Config.projectName) {
  <div class="row">
    <div class="col s12">
      <div class="panel-content">
        <div class="collection with-header">
          <div class="collection-header">
            <a href="@controllers.routes.HomeController.home(q)" class="right teal-text">Process All</a>
            <h5>@utils.NumberUtils.withCommas(keys.size) Available Projects</h5>
            <form action="@controllers.routes.HomeController.home()" method="get">
              <input name="q" type="text" placeholder="Filter" value="@q" />
            </form>
          </div>
          <div class="collection-item">
            <table class="bordered highlight">
              <thead>
                <tr>
                  <th>Key</th>
                  <th>Project</th>
                  <th>Github</th>
                </tr>
              </thead>
              <tbody>
              @keys.map { key =>
                @defining(repos.find(_.name == ("scala-js-" + key._2))) { repo =>
                  @defining(projectDirs.contains("scala-js-" + key._2)) { dirExists =>
                    <tr>
                      <td>@key._1</td>
                      <td>@if(dirExists) {
                        <a class="teal-text" href="@controllers.routes.ProcessController.process(key._1)"><i class="fa fa-check"></i></a>
                      } else {
                        <a class="teal-text" href="@controllers.routes.ProcessController.process(key._1)"><i class="fa fa-close"></i></a>
                      }</td>
                      <td>@if(repo.isDefined) {
                        <a class="teal-text" href="@controllers.routes.GithubController.detail(key._2)"><i class="fa fa-check"></i></a>
                      } else {
                        <a class="teal-text" href="@controllers.routes.GithubController.create(key._2)"><i class="fa fa-close"></i></a>
                      }</td>
                    </tr>
                  }
                }
              }
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
}
